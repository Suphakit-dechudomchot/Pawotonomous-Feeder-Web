# 📱 Offline Mode - คู่มือการใช้งาน

## 🎯 ภาพรวม

Pawtonomous Feeder รองรับ **Offline Mode** ที่ช่วยให้คุณสามารถใช้งานเว็บแอปได้แม้ไม่มีอินเทอร์เน็ต

---

## 🔍 สถานะการเชื่อมต่อ 2 ระดับ

### 1️⃣ **สถานะเว็บแอป** (Web Connection)
- 🟢 **ออนไลน์**: เว็บเบราว์เซอร์เชื่อมต่ออินเทอร์เน็ต
- 🔴 **ออฟไลน์**: เว็บเบราว์เซอร์ไม่มีอินเทอร์เน็ต

### 2️⃣ **สถานะเครื่องให้อาหาร** (Device Connection)
- 🟢 **ออนไลน์**: เครื่องเชื่อมต่อ Firebase
- 🔴 **ออฟไลน์**: เครื่องไม่เชื่อมต่อ Firebase

---

## ✅ สิ่งที่ทำได้เมื่อเว็บออฟไลน์

### 📖 **ดูข้อมูล**
- ดูมื้ออาหารที่ตั้งไว้
- ดูการตั้งค่าต่างๆ
- ดูประวัติการแจ้งเตือนที่ cache ไว้

### ✏️ **แก้ไขข้อมูล**
- แก้ไขมื้ออาหาร (จะบันทึกเมื่อกลับมาออนไลน์)
- ใช้โปรแกรมคำนวณอาหารสัตว์

---

## ❌ สิ่งที่ทำไม่ได้เมื่อเว็บออฟไลน์

### 🚫 **คำสั่งควบคุม**
- ❌ ให้อาหารทันที
- ❌ ตรวจสอบระดับอาหาร
- ❌ ตรวจสอบการเคลื่อนไหว
- ❌ เล่นเสียงเรียกสัตว์
- ❌ อัปโหลดไฟล์เสียง

### 🚫 **ข้อมูล Real-time**
- ❌ สถานะเครื่องแบบ real-time
- ❌ การแจ้งเตือนใหม่

---

## 📊 สถานการณ์การใช้งาน

### 🟢🟢 **เว็บออนไลน์ + เครื่องออนไลน์**
✅ ใช้งานได้เต็มรูปแบบ

### 🔴🟢 **เว็บออฟไลน์ + เครื่องออนไลน์**
- ✅ ดูและแก้ไขข้อมูล
- ❌ ส่งคำสั่งไม่ได้
- 💡 **แนะนำ**: รอจนกว่าเว็บจะกลับมาออนไลน์

### 🟢🔴 **เว็บออนไลน์ + เครื่องออฟไลน์**
- ✅ ดูและแก้ไขข้อมูล (บันทึกทันที)
- ❌ ส่งคำสั่งไม่ได้
- 💡 **แนะนำ**: ตรวจสอบการเชื่อมต่อของเครื่อง

### 🔴🔴 **เว็บออฟไลน์ + เครื่องออฟไลน์**
- ✅ ดูข้อมูลที่ cache ไว้
- ✅ แก้ไขข้อมูล (จะ sync ทีหลัง)
- ❌ ส่งคำสั่งไม่ได้

---

## 🔧 การทำงานของ Offline Mode

### 1. **Service Worker**
- Cache ไฟล์สำคัญ (HTML, CSS, JS)
- ให้บริการไฟล์จาก cache เมื่อออฟไลน์

### 2. **Online/Offline Detection**
- ตรวจจับสถานะอินเทอร์เน็ตแบบ real-time
- แสดง banner แจ้งเตือนเมื่อออฟไลน์

### 3. **UI Adaptation**
- ปิดการใช้งานปุ่มที่ต้องการอินเทอร์เน็ต
- แสดงไอคอน 🔌 บนปุ่มที่ใช้ไม่ได้

---

## 💡 เคล็ดลับการใช้งาน

1. **ตรวจสอบสถานะ**: ดูที่มุมขวาบนเสมอ
2. **วางแผนล่วงหน้า**: ตั้งค่าทุกอย่างก่อนออฟไลน์
3. **ใช้ Calculator**: ทำงานได้แม้ออฟไลน์
4. **รอ Sync**: การเปลี่ยนแปลงจะถูกบันทึกเมื่อกลับมาออนไลน์

---

## 🚀 Progressive Web App (PWA)

เว็บนี้รองรับ PWA คุณสามารถ:
- 📲 ติดตั้งเป็นแอปบนมือถือ
- 🚀 เปิดใช้งานเร็วขึ้น
- 💾 ใช้งานออฟไลน์ได้ดีขึ้น

### วิธีติดตั้ง:
1. เปิดเว็บด้วย Chrome/Edge
2. กด "เพิ่มไปยังหน้าจอหลัก"
3. เปิดใช้งานเหมือนแอปปกติ

---

## 🐛 แก้ปัญหา

### ปัญหา: เว็บแสดงว่าออฟไลน์แต่มีอินเทอร์เน็ต
**วิธีแก้**: รีเฟรชหน้าเว็บ (F5)

### ปัญหา: ข้อมูลไม่อัปเดต
**วิธีแก้**: ตรวจสอบว่าเว็บและเครื่องออนไลน์

### ปัญหา: ปุ่มใช้ไม่ได้
**วิธีแก้**: ตรวจสอบสถานะการเชื่อมต่อทั้ง 2 ระดับ

---

## 📞 ติดต่อสอบถาม

หากมีปัญหาหรือข้อสงสัย กรุณาติดต่อทีมพัฒนา
